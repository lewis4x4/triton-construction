-- =============================================================================
-- Migration 093: Comprehensive Module Seed Data
-- =============================================================================
-- Populates demo data for all modules:
-- - Toolbox Talks (Safety)
-- - Purchase Orders (Materials)
-- - Non-Conformances / NCRs (Quality Control)
-- - Inspections (Quality Control)
-- - Test Types and Results (Quality Control)
-- =============================================================================

-- Use the existing sandbox organization
-- Organization: a0000000-0000-0000-0000-000000000001 (Triton Construction Inc.)
-- Projects:
--   b0000000-0000-0000-0000-000000000001 (Corridor H Section 12)
--   b0000000-0000-0000-0000-000000000002 (US-35 Bridge Replacement)
--   b0000000-0000-0000-0000-000000000003 (I-64 Widening Phase 2)
-- User: a1448b14-4425-41e7-a662-8b220eb284b6 (Brian Lewis)

-- =============================================================================
-- PART 1: TOOLBOX TALKS (Safety Module)
-- =============================================================================

INSERT INTO public.toolbox_talks (
    id,
    organization_id,
    project_id,
    talk_date,
    talk_time,
    topic,
    description,
    duration_minutes,
    conducted_by,
    conductor_name,
    weather_discussed,
    site_conditions,
    hazards_identified,
    employee_count,
    subcontractor_count,
    is_completed,
    completed_at
) VALUES
-- Heat Illness Prevention Talk
(
    'e0000000-0000-0000-0000-000000000001',
    'a0000000-0000-0000-0000-000000000001',
    'b0000000-0000-0000-0000-000000000001',
    CURRENT_DATE - INTERVAL '2 days',
    '06:30:00',
    'Heat Illness Prevention',
    'Summer heat safety protocols including hydration, rest breaks, shade requirements, and recognizing signs of heat stress. Review of buddy system and emergency procedures.',
    20,
    'a1448b14-4425-41e7-a662-8b220eb284b6',
    'Mike Thompson',
    true,
    'Hot and humid, expected high of 95Â°F',
    ARRAY['Heat exhaustion', 'Heat stroke', 'Dehydration', 'Sun exposure'],
    12,
    4,
    true,
    (CURRENT_DATE - INTERVAL '2 days')::timestamp + TIME '06:50:00'
),
-- Trenching & Excavation Safety Talk
(
    'e0000000-0000-0000-0000-000000000002',
    'a0000000-0000-0000-0000-000000000001',
    'b0000000-0000-0000-0000-000000000001',
    CURRENT_DATE - INTERVAL '5 days',
    '06:30:00',
    'Trenching & Excavation Safety',
    'OSHA excavation requirements, protective systems, competent person duties, daily inspections. Covered Type C soil conditions and sloping requirements.',
    25,
    'a1448b14-4425-41e7-a662-8b220eb284b6',
    'Robert Davis',
    true,
    'Recent rain, saturated soils, unstable conditions',
    ARRAY['Cave-in', 'Falling materials', 'Hazardous atmosphere', 'Water accumulation', 'Utility strikes'],
    15,
    3,
    true,
    (CURRENT_DATE - INTERVAL '5 days')::timestamp + TIME '06:55:00'
),
-- PPE Inspection & Care Talk
(
    'e0000000-0000-0000-0000-000000000003',
    'a0000000-0000-0000-0000-000000000001',
    'b0000000-0000-0000-0000-000000000002',
    CURRENT_DATE - INTERVAL '3 days',
    '07:00:00',
    'PPE Inspection & Care',
    'Proper inspection of PPE before use, identifying damage, replacement criteria. Focus on hard hats, safety glasses, high-vis vests, and fall protection equipment.',
    15,
    'a1448b14-4425-41e7-a662-8b220eb284b6',
    'Sarah Williams',
    false,
    'Normal conditions',
    ARRAY['Damaged PPE', 'Improper fit', 'Missing equipment'],
    8,
    2,
    true,
    (CURRENT_DATE - INTERVAL '3 days')::timestamp + TIME '07:15:00'
),
-- Fall Protection Talk
(
    'e0000000-0000-0000-0000-000000000004',
    'a0000000-0000-0000-0000-000000000001',
    'b0000000-0000-0000-0000-000000000002',
    CURRENT_DATE - INTERVAL '1 day',
    '06:30:00',
    'Fall Protection Requirements',
    'Review of 6-foot rule for construction, proper harness inspection, anchor points, and rescue planning. Discussed leading edge work and guardrail systems.',
    20,
    'a1448b14-4425-41e7-a662-8b220eb284b6',
    'John Martinez',
    true,
    'Windy conditions, gusts up to 25 mph',
    ARRAY['Falls from height', 'Unprotected edges', 'Improper anchor points', 'Debris from wind'],
    10,
    5,
    true,
    (CURRENT_DATE - INTERVAL '1 day')::timestamp + TIME '06:50:00'
),
-- Silica Exposure Prevention Talk
(
    'e0000000-0000-0000-0000-000000000005',
    'a0000000-0000-0000-0000-000000000001',
    'b0000000-0000-0000-0000-000000000003',
    CURRENT_DATE,
    '06:45:00',
    'Silica Exposure Prevention',
    'Crystalline silica hazards during concrete cutting, grinding operations. Review of engineering controls, wet methods, respiratory protection requirements.',
    18,
    'a1448b14-4425-41e7-a662-8b220eb284b6',
    'Lisa Brown',
    false,
    'Concrete cutting operations scheduled',
    ARRAY['Silica dust inhalation', 'Respiratory illness', 'Eye irritation'],
    9,
    3,
    true,
    CURRENT_DATE::timestamp + TIME '07:03:00'
)
ON CONFLICT DO NOTHING;

-- =============================================================================
-- PART 2: PURCHASE ORDERS (Materials Module)
-- =============================================================================

INSERT INTO public.purchase_orders (
    id,
    organization_id,
    project_id,
    po_number,
    supplier_id,
    vendor_name,
    vendor_contact,
    vendor_phone,
    po_date,
    required_date,
    subtotal,
    tax_amount,
    total_amount,
    total_received_amount,
    status,
    requires_buy_america,
    buy_america_certified,
    default_cost_code,
    notes,
    created_by
) VALUES
-- Mountain State Concrete - Concrete PO
(
    'f0000000-0000-0000-0000-000000000001',
    'a0000000-0000-0000-0000-000000000001',
    'b0000000-0000-0000-0000-000000000001',
    'PO-2024-0041',
    NULL,
    'Mountain State Concrete',
    'Tom Anderson',
    '304-555-0100',
    CURRENT_DATE - INTERVAL '30 days',
    CURRENT_DATE - INTERVAL '20 days',
    45000.00,
    0.00,
    45000.00,
    32500.00,
    'partially_received',
    false,
    false,
    '02-200',
    'Concrete for bridge deck pour - Phase 1',
    'a1448b14-4425-41e7-a662-8b220eb284b6'
),
-- WV Aggregates - Aggregate PO
(
    'f0000000-0000-0000-0000-000000000002',
    'a0000000-0000-0000-0000-000000000001',
    'b0000000-0000-0000-0000-000000000001',
    'PO-2024-0042',
    NULL,
    'WV Aggregates Inc.',
    'Jim Crawford',
    '304-555-0200',
    CURRENT_DATE - INTERVAL '25 days',
    CURRENT_DATE - INTERVAL '10 days',
    32500.00,
    0.00,
    32500.00,
    32500.00,
    'fully_received',
    false,
    false,
    '01-100',
    '#57 Stone for base course',
    'a1448b14-4425-41e7-a662-8b220eb284b6'
),
-- Steel Supply Company - Rebar PO
(
    'f0000000-0000-0000-0000-000000000003',
    'a0000000-0000-0000-0000-000000000001',
    'b0000000-0000-0000-0000-000000000002',
    'PO-2024-0043',
    NULL,
    'Steel Supply Company',
    'Mike Reynolds',
    '304-555-0300',
    CURRENT_DATE - INTERVAL '45 days',
    CURRENT_DATE - INTERVAL '30 days',
    78000.00,
    0.00,
    78000.00,
    78000.00,
    'fully_received',
    true,
    true,
    '03-300',
    'Rebar for bridge substructure - Buy America certified',
    'a1448b14-4425-41e7-a662-8b220eb284b6'
),
-- Asphalt Solutions - Paving PO
(
    'f0000000-0000-0000-0000-000000000004',
    'a0000000-0000-0000-0000-000000000001',
    'b0000000-0000-0000-0000-000000000003',
    'PO-2024-0044',
    NULL,
    'Asphalt Solutions LLC',
    'Dave Peters',
    '304-555-0400',
    CURRENT_DATE - INTERVAL '15 days',
    CURRENT_DATE + INTERVAL '5 days',
    125000.00,
    0.00,
    125000.00,
    45000.00,
    'partially_received',
    false,
    false,
    '05-500',
    '9.5mm Superpave surface course - I-64 widening',
    'a1448b14-4425-41e7-a662-8b220eb284b6'
),
-- Pipe & Culvert Supply
(
    'f0000000-0000-0000-0000-000000000005',
    'a0000000-0000-0000-0000-000000000001',
    'b0000000-0000-0000-0000-000000000001',
    'PO-2024-0045',
    NULL,
    'Pipe & Culvert Supply',
    'Nancy Wilson',
    '304-555-0500',
    CURRENT_DATE - INTERVAL '20 days',
    CURRENT_DATE - INTERVAL '5 days',
    56000.00,
    0.00,
    56000.00,
    0.00,
    'approved',
    false,
    false,
    '31-000',
    'Storm drain pipes and culverts',
    'a1448b14-4425-41e7-a662-8b220eb284b6'
)
ON CONFLICT DO NOTHING;

-- PO Line Items
INSERT INTO public.po_line_items (
    id,
    purchase_order_id,
    line_number,
    description,
    material_category,
    quantity,
    unit_of_measure,
    unit_price,
    quantity_received,
    specification,
    cost_code,
    buy_america_required
) VALUES
-- Mountain State Concrete lines
('f1000000-0000-0000-0000-000000000001', 'f0000000-0000-0000-0000-000000000001', 1, '4000 PSI Concrete - Bridge Deck', 'concrete', 500.00, 'CY', 90.00, 361.00, 'Class A 4000 PSI, 3/4" aggregate', '02-200', false),

-- WV Aggregates lines
('f1000000-0000-0000-0000-000000000002', 'f0000000-0000-0000-0000-000000000002', 1, '#57 Stone - Base Course', 'aggregate', 2500.00, 'TON', 13.00, 2500.00, 'AASHTO #57', '01-100', false),

-- Steel Supply lines
('f1000000-0000-0000-0000-000000000003', 'f0000000-0000-0000-0000-000000000003', 1, '#5 Rebar - Grade 60', 'steel', 40000.00, 'LB', 1.25, 40000.00, 'ASTM A615 Grade 60', '03-300', true),
('f1000000-0000-0000-0000-000000000004', 'f0000000-0000-0000-0000-000000000003', 2, '#8 Rebar - Grade 60', 'steel', 12000.00, 'LB', 1.50, 12000.00, 'ASTM A615 Grade 60', '03-300', true),

-- Asphalt Solutions lines
('f1000000-0000-0000-0000-000000000005', 'f0000000-0000-0000-0000-000000000004', 1, '9.5mm Superpave Surface', 'asphalt', 2500.00, 'TON', 50.00, 900.00, 'PG 64-22', '05-500', false),

-- Pipe & Culvert lines
('f1000000-0000-0000-0000-000000000006', 'f0000000-0000-0000-0000-000000000005', 1, '24" RCP Storm Pipe', 'pipe', 500.00, 'LF', 85.00, 0.00, 'Class III', '31-000', false),
('f1000000-0000-0000-0000-000000000007', 'f0000000-0000-0000-0000-000000000005', 2, '36" RCP Culvert', 'pipe', 120.00, 'LF', 135.00, 0.00, 'Class IV', '31-000', false)
ON CONFLICT DO NOTHING;

-- =============================================================================
-- PART 3: TEST TYPES (Quality Control Reference Data)
-- =============================================================================

INSERT INTO public.test_types (
    id,
    organization_id,
    code,
    name,
    category,
    test_method,
    specification_reference,
    min_value,
    max_value,
    target_value,
    unit_of_measure,
    required_frequency,
    wvdoh_form_number,
    is_active,
    created_by
) VALUES
('g0000000-0000-0000-0000-000000000001', 'a0000000-0000-0000-0000-000000000001', 'CONC-COMP-28', 'Concrete Compressive Strength (28 day)', 'concrete', 'ASTM C39', 'WVDOH Section 501', 4000.00, NULL, 4500.00, 'PSI', '1 per 50 CY or 1 per day', 'T-22A', true, 'a1448b14-4425-41e7-a662-8b220eb284b6'),
('g0000000-0000-0000-0000-000000000002', 'a0000000-0000-0000-0000-000000000001', 'CONC-SLUMP', 'Concrete Slump Test', 'concrete', 'ASTM C143', 'WVDOH Section 501', 2.00, 6.00, 4.00, 'IN', 'Each load', 'T-22A', true, 'a1448b14-4425-41e7-a662-8b220eb284b6'),
('g0000000-0000-0000-0000-000000000003', 'a0000000-0000-0000-0000-000000000001', 'CONC-AIR', 'Concrete Air Content', 'concrete', 'ASTM C231', 'WVDOH Section 501', 4.00, 8.00, 6.00, '%', 'Each load', 'T-22A', true, 'a1448b14-4425-41e7-a662-8b220eb284b6'),
('g0000000-0000-0000-0000-000000000004', 'a0000000-0000-0000-0000-000000000001', 'SOIL-COMP', 'Soil Compaction (Proctor)', 'compaction', 'ASTM D698', 'WVDOH Section 206', 95.00, NULL, 98.00, '%', '1 per 500 CY or 1 per lift', 'T-180', true, 'a1448b14-4425-41e7-a662-8b220eb284b6'),
('g0000000-0000-0000-0000-000000000005', 'a0000000-0000-0000-0000-000000000001', 'ASPH-DENS', 'Asphalt Density (Nuclear)', 'asphalt', 'ASTM D2950', 'WVDOH Section 401', 92.00, NULL, 94.00, '%', '1 per 500 tons', 'T-355', true, 'a1448b14-4425-41e7-a662-8b220eb284b6'),
('g0000000-0000-0000-0000-000000000006', 'a0000000-0000-0000-0000-000000000001', 'AGG-GRAD', 'Aggregate Gradation', 'gradation', 'ASTM C136', 'WVDOH Section 703', NULL, NULL, NULL, 'SIEVE %', '1 per 500 tons', 'T-27', true, 'a1448b14-4425-41e7-a662-8b220eb284b6')
ON CONFLICT DO NOTHING;

-- =============================================================================
-- PART 4: NON-CONFORMANCES / NCRs (Quality Control)
-- =============================================================================

INSERT INTO public.non_conformances (
    id,
    organization_id,
    project_id,
    ncr_number,
    discovered_date,
    discovered_by,
    discoverer_name,
    source_type,
    location_description,
    station,
    title,
    description,
    specification_reference,
    severity,
    category,
    responsible_party,
    estimated_cost,
    actual_cost,
    status,
    root_cause,
    corrective_action,
    corrective_action_due_date,
    closure_notes,
    created_by
) VALUES
-- Concrete honeycombing issue
(
    'h0000000-0000-0000-0000-000000000001',
    'a0000000-0000-0000-0000-000000000001',
    'b0000000-0000-0000-0000-000000000001',
    'NCR-2024-001',
    CURRENT_DATE - INTERVAL '10 days',
    'a1448b14-4425-41e7-a662-8b220eb284b6',
    'John Martinez',
    'inspection',
    'Bridge Pier #3, North Face',
    'STA 245+50',
    'Concrete Honeycombing Defect',
    'Honeycombing observed on north face of Pier #3 after form removal. Area approximately 2 ft x 3 ft with voids up to 1.5" deep. Exposed aggregate visible.',
    'WVDOH Section 501.03',
    'major',
    'Workmanship',
    'Triton Construction',
    3500.00,
    NULL,
    'corrective_action',
    'Improper vibration during pour. Vibrator not reaching bottom of lift. Congested reinforcement prevented proper consolidation.',
    'Surface to be prepared per WVDOH repair procedures. Epoxy-bonded repair mortar to be applied. Area to be cured and inspected.',
    CURRENT_DATE + INTERVAL '7 days',
    NULL,
    'a1448b14-4425-41e7-a662-8b220eb284b6'
),
-- Aggregate gradation issue
(
    'h0000000-0000-0000-0000-000000000002',
    'a0000000-0000-0000-0000-000000000001',
    'b0000000-0000-0000-0000-000000000001',
    'NCR-2024-002',
    CURRENT_DATE - INTERVAL '15 days',
    'a1448b14-4425-41e7-a662-8b220eb284b6',
    'Sarah Williams',
    'test',
    'Base Course - Section A',
    'STA 220+00 to STA 225+00',
    'Aggregate Gradation Out of Specification',
    'Lab test T-27 results show #57 stone gradation failing #4 sieve requirement. 62% passing vs 50% max spec. Material from WV Aggregates stockpile.',
    'AASHTO M43, WVDOH Section 703',
    'minor',
    'Material',
    'WV Aggregates Inc.',
    1500.00,
    1200.00,
    'closed',
    'Stockpile contamination at supplier. Recent deliveries from different quarry source.',
    'Rejected remaining material from affected stockpile. Supplier to provide new shipment from verified source. Additional testing on subsequent loads.',
    CURRENT_DATE - INTERVAL '5 days',
    'Replacement material received and tested satisfactory. Supplier issued credit for rejected material.',
    'a1448b14-4425-41e7-a662-8b220eb284b6'
),
-- Bridge bearing anchor bolt spacing
(
    'h0000000-0000-0000-0000-000000000003',
    'a0000000-0000-0000-0000-000000000001',
    'b0000000-0000-0000-0000-000000000002',
    'NCR-2024-003',
    CURRENT_DATE - INTERVAL '5 days',
    'a1448b14-4425-41e7-a662-8b220eb284b6',
    'Robert Davis',
    'inspection',
    'Abutment A, Bearing Seat',
    'STA 100+00',
    'Bridge Bearing Anchor Bolt Spacing Error',
    'Anchor bolt pattern for bearing plate shows 1/2" offset from centerline. Bolt spacing is correct but entire pattern shifted. Discovered during bearing installation.',
    'Contract Plans Sheet 12 of 48',
    'critical',
    'Workmanship',
    'Triton Construction',
    8500.00,
    NULL,
    'investigation',
    NULL,
    NULL,
    CURRENT_DATE + INTERVAL '14 days',
    NULL,
    'a1448b14-4425-41e7-a662-8b220eb284b6'
),
-- Silt fence breach
(
    'h0000000-0000-0000-0000-000000000004',
    'a0000000-0000-0000-0000-000000000001',
    'b0000000-0000-0000-0000-000000000003',
    'NCR-2024-004',
    CURRENT_DATE - INTERVAL '3 days',
    'a1448b14-4425-41e7-a662-8b220eb284b6',
    'Mike Thompson',
    'observation',
    'South property line, drainage swale',
    'STA 350+00',
    'Erosion Control - Silt Fence Breach',
    'Heavy rain event caused silt fence failure. Sediment discharged into adjacent drainage channel. Approximately 50 LF of silt fence down.',
    'WVDOH Section 651, NPDES Permit',
    'major',
    'Environmental',
    'Triton Construction',
    2200.00,
    1800.00,
    'closed',
    'Insufficient toe-in depth at installation. Heavy equipment traffic compromised fence integrity.',
    'Fence replaced with proper toe-in. Sediment removed from drainage channel. Rock check dams installed as secondary control.',
    CURRENT_DATE - INTERVAL '1 day',
    'Repairs completed. DEP notified per SWPPP requirements. No further discharge observed.',
    'a1448b14-4425-41e7-a662-8b220eb284b6'
)
ON CONFLICT DO NOTHING;

-- =============================================================================
-- PART 5: INSPECTIONS (Quality Control)
-- =============================================================================

INSERT INTO public.inspections (
    id,
    organization_id,
    project_id,
    inspection_number,
    inspection_type,
    scheduled_date,
    actual_date,
    location_description,
    station_from,
    station_to,
    work_description,
    cost_code,
    inspector_name,
    inspector_company,
    wvdoh_inspector_present,
    wvdoh_inspector_name,
    status,
    overall_result,
    items_passed,
    items_failed,
    items_na,
    pass_percentage,
    conditions_for_acceptance,
    notes,
    created_by
) VALUES
-- Box Culvert Rebar Inspection
(
    'i0000000-0000-0000-0000-000000000001',
    'a0000000-0000-0000-0000-000000000001',
    'b0000000-0000-0000-0000-000000000001',
    'INS-2024-0051',
    'pre_construction',
    CURRENT_DATE - INTERVAL '12 days',
    CURRENT_DATE - INTERVAL '12 days',
    'Box Culvert BC-3, Reinforcement',
    'STA 232+00',
    'STA 232+50',
    'Pre-pour rebar inspection for box culvert floor slab',
    '02-200',
    'Robert Johnson',
    'WVDOH',
    true,
    'Robert Johnson',
    'passed',
    'pass',
    18,
    0,
    2,
    100.00,
    NULL,
    'All rebar placed per plans. Cover and spacing verified. Splices per details. Approved for pour.',
    'a1448b14-4425-41e7-a662-8b220eb284b6'
),
-- Aggregate Gradation Test - Conditional
(
    'i0000000-0000-0000-0000-000000000002',
    'a0000000-0000-0000-0000-000000000001',
    'b0000000-0000-0000-0000-000000000001',
    'INS-2024-0052',
    'in_progress',
    CURRENT_DATE - INTERVAL '8 days',
    CURRENT_DATE - INTERVAL '8 days',
    'Base Course Placement Area B',
    'STA 240+00',
    'STA 248+00',
    'Aggregate base gradation and compaction verification',
    '01-100',
    'Tom Mitchell',
    'Core Testing Lab',
    false,
    NULL,
    'conditional',
    'conditional',
    12,
    2,
    1,
    85.71,
    'Re-test required on STA 245+00 - moisture content exceeded. Allow 24 hours to dry before re-testing.',
    'Most areas satisfactory. One location shows elevated moisture affecting compaction.',
    'a1448b14-4425-41e7-a662-8b220eb284b6'
),
-- Subgrade Compaction Test - Failed
(
    'i0000000-0000-0000-0000-000000000003',
    'a0000000-0000-0000-0000-000000000001',
    'b0000000-0000-0000-0000-000000000002',
    'INS-2024-0053',
    'in_progress',
    CURRENT_DATE - INTERVAL '6 days',
    CURRENT_DATE - INTERVAL '6 days',
    'Roadway Subgrade Section C',
    'STA 115+00',
    'STA 120+00',
    'Subgrade compaction testing prior to base placement',
    '01-100',
    'Jennifer Adams',
    'WV DEP',
    false,
    NULL,
    'failed',
    'fail',
    8,
    4,
    0,
    66.67,
    NULL,
    'Failed at 4 of 12 test locations. Average 91% compaction vs 95% required. Area needs rework.',
    'a1448b14-4425-41e7-a662-8b220eb284b6'
),
-- Pre-Pour Deck Inspection - Scheduled
(
    'i0000000-0000-0000-0000-000000000004',
    'a0000000-0000-0000-0000-000000000001',
    'b0000000-0000-0000-0000-000000000002',
    'INS-2024-0054',
    'milestone',
    CURRENT_DATE + INTERVAL '2 days',
    NULL,
    'Bridge Deck Span 1',
    'STA 100+00',
    'STA 100+75',
    'Pre-pour inspection of deck reinforcement and formwork',
    '02-200',
    NULL,
    'WVDOH',
    true,
    'Robert Johnson',
    'scheduled',
    NULL,
    0,
    0,
    0,
    NULL,
    NULL,
    'WVDOH has been notified. Deck pour scheduled for 3 days after inspection.',
    'a1448b14-4425-41e7-a662-8b220eb284b6'
),
-- Erosion Control Inspection - Scheduled
(
    'i0000000-0000-0000-0000-000000000005',
    'a0000000-0000-0000-0000-000000000001',
    'b0000000-0000-0000-0000-000000000003',
    'INS-2024-0055',
    'special',
    CURRENT_DATE + INTERVAL '1 day',
    NULL,
    'Project-wide erosion control',
    'STA 300+00',
    'STA 400+00',
    'Weekly SWPPP inspection - erosion and sediment control measures',
    '39-000',
    NULL,
    'WV DEP',
    false,
    NULL,
    'scheduled',
    NULL,
    0,
    0,
    0,
    NULL,
    NULL,
    'Regular weekly inspection per NPDES permit requirements.',
    'a1448b14-4425-41e7-a662-8b220eb284b6'
)
ON CONFLICT DO NOTHING;

-- =============================================================================
-- PART 6: TEST RESULTS (Quality Control)
-- =============================================================================

INSERT INTO public.test_results (
    id,
    organization_id,
    project_id,
    test_number,
    test_type_id,
    sample_id,
    sample_date,
    sample_location,
    station,
    material_description,
    material_source,
    batch_number,
    mix_design,
    slump,
    air_content,
    temperature,
    test_date,
    test_age_days,
    tested_by,
    lab_name,
    result_value,
    result_unit,
    specification_min,
    specification_max,
    status,
    meets_specification,
    notes,
    wvdoh_form_submitted,
    created_by
) VALUES
-- Concrete strength test - passed
(
    'j0000000-0000-0000-0000-000000000001',
    'a0000000-0000-0000-0000-000000000001',
    'b0000000-0000-0000-0000-000000000001',
    'T-2024-0101',
    'g0000000-0000-0000-0000-000000000001',
    'CYL-2024-0050A',
    CURRENT_DATE - INTERVAL '30 days',
    'Pier #2 Foundation',
    'STA 235+00',
    '4000 PSI Concrete',
    'Mountain State Concrete',
    'MSC-112450',
    '4000-A1',
    4.25,
    6.2,
    72.0,
    CURRENT_DATE - INTERVAL '2 days',
    28,
    'Lab Tech Smith',
    'Core Testing Lab',
    4650.00,
    'PSI',
    4000.00,
    NULL,
    'passed',
    true,
    '28-day break. Exceeds specification.',
    true,
    'a1448b14-4425-41e7-a662-8b220eb284b6'
),
-- Concrete strength test - passed
(
    'j0000000-0000-0000-0000-000000000002',
    'a0000000-0000-0000-0000-000000000001',
    'b0000000-0000-0000-0000-000000000001',
    'T-2024-0102',
    'g0000000-0000-0000-0000-000000000001',
    'CYL-2024-0051A',
    CURRENT_DATE - INTERVAL '28 days',
    'Pier #3 Foundation',
    'STA 245+50',
    '4000 PSI Concrete',
    'Mountain State Concrete',
    'MSC-112455',
    '4000-A1',
    4.00,
    5.8,
    74.0,
    CURRENT_DATE,
    28,
    'Lab Tech Johnson',
    'Core Testing Lab',
    4380.00,
    'PSI',
    4000.00,
    NULL,
    'passed',
    true,
    '28-day break. Meets specification.',
    true,
    'a1448b14-4425-41e7-a662-8b220eb284b6'
),
-- Soil compaction test - passed
(
    'j0000000-0000-0000-0000-000000000003',
    'a0000000-0000-0000-0000-000000000001',
    'b0000000-0000-0000-0000-000000000001',
    'T-2024-0103',
    'g0000000-0000-0000-0000-000000000004',
    NULL,
    CURRENT_DATE - INTERVAL '5 days',
    'Embankment Section A',
    'STA 220+00',
    'Select Borrow',
    'On-site',
    NULL,
    NULL,
    NULL,
    NULL,
    NULL,
    CURRENT_DATE - INTERVAL '5 days',
    NULL,
    'Mike Brown',
    'Field Testing',
    97.5,
    '%',
    95.00,
    NULL,
    'passed',
    true,
    'Nuclear density test. Lift #3.',
    true,
    'a1448b14-4425-41e7-a662-8b220eb284b6'
),
-- Asphalt density test - failed
(
    'j0000000-0000-0000-0000-000000000004',
    'a0000000-0000-0000-0000-000000000001',
    'b0000000-0000-0000-0000-000000000003',
    'T-2024-0104',
    'g0000000-0000-0000-0000-000000000005',
    NULL,
    CURRENT_DATE - INTERVAL '3 days',
    'Mainline Surface Course',
    'STA 355+00',
    '9.5mm Superpave',
    'Asphalt Solutions LLC',
    'AS-88501',
    'SP-9.5-64',
    NULL,
    NULL,
    295.0,
    CURRENT_DATE - INTERVAL '3 days',
    NULL,
    'Tom Williams',
    'Field Testing',
    91.2,
    '%',
    92.00,
    NULL,
    'failed',
    false,
    'Density below spec. Area marked for additional rolling passes.',
    true,
    'a1448b14-4425-41e7-a662-8b220eb284b6'
),
-- Retest - passed
(
    'j0000000-0000-0000-0000-000000000005',
    'a0000000-0000-0000-0000-000000000001',
    'b0000000-0000-0000-0000-000000000003',
    'T-2024-0105',
    'g0000000-0000-0000-0000-000000000005',
    NULL,
    CURRENT_DATE - INTERVAL '2 days',
    'Mainline Surface Course',
    'STA 355+00',
    '9.5mm Superpave',
    'Asphalt Solutions LLC',
    'AS-88501',
    'SP-9.5-64',
    NULL,
    NULL,
    NULL,
    CURRENT_DATE - INTERVAL '2 days',
    NULL,
    'Tom Williams',
    'Field Testing',
    93.8,
    '%',
    92.00,
    NULL,
    'passed',
    true,
    'Retest after additional compaction. Meets spec.',
    true,
    'a1448b14-4425-41e7-a662-8b220eb284b6'
)
ON CONFLICT DO NOTHING;

-- =============================================================================
-- Summary
-- =============================================================================

SELECT 'Migration 093: Modules Seed Data completed successfully' as status,
       (SELECT COUNT(*) FROM public.toolbox_talks WHERE organization_id = 'a0000000-0000-0000-0000-000000000001') as toolbox_talks_count,
       (SELECT COUNT(*) FROM public.purchase_orders WHERE organization_id = 'a0000000-0000-0000-0000-000000000001') as purchase_orders_count,
       (SELECT COUNT(*) FROM public.non_conformances WHERE organization_id = 'a0000000-0000-0000-0000-000000000001') as ncrs_count,
       (SELECT COUNT(*) FROM public.inspections WHERE organization_id = 'a0000000-0000-0000-0000-000000000001') as inspections_count,
       (SELECT COUNT(*) FROM public.test_results WHERE organization_id = 'a0000000-0000-0000-0000-000000000001') as test_results_count;
